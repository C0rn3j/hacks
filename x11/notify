#!/usr/bin/env perl
use common::sense;
use Net::DBus;
use Getopt::Long;

my $urgency	= 1;
my $icon	= "";
my $id		= 0;
my $summary	= "";
my $body	= "";
my $application	= "notify";
my $timeout	= 3;

GetOptions(
	'a|appname=s'	=> \$application,
	'i|icon=s'	=> \$icon,
	'r|replace=i'	=> \$id,
	't|timeout=i'	=> \$timeout,
) or die "$@";

$summary = shift(@ARGV) or die "notify: summary not given\n";
$body = join(" ", @ARGV);

my $bus = Net::DBus->session;
my $svc = $bus->get_service("org.freedesktop.Notifications");
my $obj = $svc->get_object("/org/freedesktop/Notifications");
say $obj->Notify($application,
		$id,
		$icon,
		$summary,
		$body,
		[],
		{},
		$timeout);
